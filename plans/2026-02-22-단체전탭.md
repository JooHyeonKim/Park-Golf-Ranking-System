# 2026-02-22 단체전 탭 구현

## Context

단체전 탭은 현재 플레이스홀더 상태(`TeamTab.jsx`)이며, 클럽별 팀 집계 기능을 구현해야 한다. 개인전 상위 5명(남/여 각각)을 제외한 선수들을 클럽별로 그룹화하여 상위 5명의 타수 합계로 순위를 매긴다.

## 수정 파일

1. **`src/components/summary/SummaryPage.jsx`** - TeamTab에 `tournament` prop 전달
2. **`src/components/summary/tabs/TeamTab.jsx`** - 단체전 로직 및 UI 전체 구현

## 재사용할 기존 코드

- `calculateRankings(players)` — `src/utils/ranking.js:126`
- `calculateTotal(player)` — `src/utils/ranking.js:85`

## 구현 상세

### Step 1: SummaryPage.jsx 수정

`<TeamTab />` → `<TeamTab tournament={tournament} />` (line 26)

### Step 2: TeamTab.jsx 핵심 알고리즘 (useMemo)

```
1. calculateRankings()로 전체 순위 계산
2. 이름+점수 있는 선수 필터링
3. 개인전 수상자 제외 대상 추출:
   - 남자 상위 5명 + 여자 상위 5명 → excludedIds (Set)
4. 제외 대상 빼고 eligible 선수 목록 생성
5. club 필드 기준으로 그룹화 (빈 클럽명 제외, trim 처리)
6. 각 클럽별:
   - 이미 순위순 정렬된 상태에서 상위 5명 선택
   - 5명의 타수 합계 계산
7. 클럽 합계 기준 오름차순 정렬
8. 순위 부여 (동점 시 동일 순위)
```

### Step 3: 테이블 구조

```
헤더 Row 1: 순위(rowspan=2) | 클럽명(rowspan=2) | 합계(rowspan=2) | 1(colspan=2) | 2(colspan=2) | 3(colspan=2) | 4(colspan=2) | 5(colspan=2)
헤더 Row 2:                                                        | 성명 | 타수  | 성명 | 타수  | 성명 | 타수  | 성명 | 타수  | 성명 | 타수
데이터 Row: 1    | 그린파크  | 198  | 김민수 | 38   | 이영희 | 39   | ...
```

### Step 4: 스타일링

- 기존 탭(IndividualTab, EncouragementTab)과 동일한 패턴 사용
- `bg-white rounded-lg shadow-sm overflow-x-auto` 컨테이너
- 순위/클럽명/합계: 회색 계열 헤더
- 1~5번 선수 칼럼: 녹색 계열 헤더
- 교차 행 배경색 (`bg-white` / `bg-gray-50`)
- 합계 칼럼 강조 (노란색, bold)

### 엣지 케이스

- 클럽 인원이 5명 미만: 있는 인원만 표시, 빈 셀은 공백
- 클럽명 없는 선수: 제외
- 모든 클럽원이 개인전 수상자: 해당 클럽 미표시
- 동점 클럽: 동일 순위 부여
- 점수 없는 선수: 이미 필터링으로 제외
